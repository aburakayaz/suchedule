const config={term:"202502",dataVersion:73};config.infoLink=`https://suis.sabanciuniv.edu/prod/bwckschd.p_disp_detail_sched?term_in=${config.term}&crn_in=`,Object.freeze(config);const templateGenerator=(()=>{let e=(()=>{let e=["Mon","Tue","Wed","Thu","Fri","TBA"];return t=>e[t]})(),t=(e,t)=>{if(-1===e)return"TBA";e+=8;let n=e+t;return`${e<10?"0":""}${e}:40-${n<10?"0":""}${n}:30`},n=(n,o,s)=>`
        <div class="course-entry hide-info" data-code="${n.code}">
            <div class="course-header">
                <div class="course-name">${n.code} - ${n.name}</div>
                <div class="course-expand icon-right-open-big"></div>
            </div>
            <div class="course-info">
            ${n.classes.map(r=>`
                <div class="course-sections">
                    <div class="section-type">Sections${r.type?` (${r.type})`:""}</div>
                ${r.sections.map(i=>`
                    <div class="course-section" 
                        data-section-name="${n.code.replace(" ","")}${r.type} - ${i.group}"
                        data-crn="${i.crn}">
                    <div class="section-info">
                        <div class="section-header">
                            <div class="section-group" data-group="${i.group}">${i.group}</div>
                            <a href="${config.infoLink}${i.crn}" class="section-link" target="_blank">info</a>
                        </div>
                        <div class="instructor">${o[i.instructors]}</div>
                        <div class="section-days">
                        ${i.schedule.map(n=>`
                            <div class="section-day" 
                                data-day="${n.day}"
                                data-start="${n.start}" 
                                data-duration="${n.duration}"
                                data-place="${s[n.place]}">
                                ${e(n.day)} ${t(n.start,n.duration)} ${s[n.place]}
                            </div>
                        `).join("")}
                        </div>
                    </div>
                    <div class="section-button"></div>
                    </div>
                `).join("")}
                </div>
            `).join("")}
            </div>
        </div>
    `,o=(e,t,n="azure")=>`
        <div class="cell-course" data-crn="${t}" data-section-name="${e}"
            style="background-color: ${n};">
            <div>${e}</div>
            <div class="remove-course"></div>
        </div>
    `;return{makeCourseEntry:n,makeCellCourse:o}})(),colorPalette=(()=>{let e=["#2096BA","#C5919D","#DF6E21","#874E4C","#32485C","#765285","#351C4D","#FF7E5F","#726A95","#849974","#36384C","#F26968","#F2AD9F","#6CBF84","#323339","#AB3E16","#EFAA52","#48120E","#B37C57","#9AACB8"],t=e.slice(0);return{getColor:()=>e.splice(Math.floor(Math.random()*e.length),1).shift()||"azure",putColor:t=>"azure"===t?null:e.push(t),reset:()=>e=t.slice(0)}})(),saveSchedule=()=>{localStorage.setItem("saved-schedule",cellCourses.getAllCrnDataToSave().join(","))},courseEntry=(()=>{let e=function(t){return t instanceof $?new e.prototype.Init(t):e.findByCode(t)};return e.prototype.Init=function(e){return this.getElement=function(){return e.first()},this},e.prototype.Init.prototype=e.prototype,e.prototype.isOpen=function(){return!this.getElement().hasClass("hide-info")},e.prototype.open=function(){return this.getElement().removeClass("hide-info"),this.getElement().siblings(":not(hide-info)").addClass("hide-info"),this.updateSelectionsOnSchedule(),this},e.prototype.close=function(){return this.getElement().addClass("hide-info"),this.hideSelectionsOnSchedule(),this},e.prototype.toggleOpen=function(){return this.isOpen()?this.close():this.open(),this},e.prototype.getCodeWithSpace=function(){return this.getElement().data("code")},e.prototype.getCodeWithoutSpace=function(){return this.getElement().data("code").replace(/ /g,"")},e.prototype.getName=function(){return this.getElement().find(".course-name").text()},e.prototype.showSelectionsOnSchedule=function(){return this.getSections(".course-section.selected").forEach(e=>{e.getClassCells().getElements().addClass("selection")}),this},e.prototype.hideSelectionsOnSchedule=function(){return $(".class-cell").removeClass("selection"),this},e.prototype.updateSelectionsOnSchedule=function(){return this.hideSelectionsOnSchedule(),this.isOpen()&&!this.isSelectionComplete()&&this.showSelectionsOnSchedule(),this},e.prototype.addFilter=function(e){return this.getElement().addClass(`filter-hide-${e}`),this},e.prototype.removeFilter=function(e){return this.getElement().removeClass(`filter-hide-${e}`),this},e.prototype.nameContains=function(e){let t=this.getName();return(t=t.replaceAll(/\s+/g,"").toUpperCase()).indexOf(e)>-1},e.prototype.isSelectionComplete=function(){return this.getElement().find(".selected").length===this.getElement().find(".course-sections").length},e.prototype.isMainCourseSelected=function(){return this.getElement().find(".course-sections:first .selected").length>0},e.prototype.getSections=function(e=".course-section"){return $.map(this.getElement().find(e),e=>sectionEntry($(e)))},e.prototype.getCellCourseColor=function(){return cellCourses.findByCourseCode(this.getCodeWithoutSpace()).getColor()},e.prototype.isOnSchedule=function(){return cellCourses.findByCourseCode(this.getCodeWithoutSpace()).getElements().length>0},e.prototype.addToSchedule=function(){this.hideSelectionsOnSchedule();let e=colorPalette.getColor();return this.getSections(".course-section.selected").forEach(t=>{t.getClassCells().addCellCourse(cellCourses.make(t.getName(),t.getCrn(),e))}),saveSchedule(),this},e.prototype.removeFromSchedule=function(){return this.isOnSchedule()&&(colorPalette.putColor(this.getCellCourseColor()),this.getSections().forEach(e=>{classCells.findContainsCrn(e.getCrn()).removeCellCourse(e.getCrn())})),this.updateSelectionsOnSchedule(),saveSchedule(),this},e.prototype.actOnSectionSelected=function(){return this.updateSelectionsOnSchedule(),this.isSelectionComplete()&&this.addToSchedule(),this},e.prototype.actOnSectionDeselected=function(){return this.removeFromSchedule(),this.isMainCourseSelected()&&!this.isOpen()&&(e.endDisplayMode(),e.startDisplayMode(this.getCodeWithSpace())),this},e.prototype.hasEmptySection=function(){for(let e of this.getElement().find(".course-sections"))if(0===$(e).find(".course-section:not([class*=filter-hide-])").length)return!0;return!1},e.closeAll=()=>{$(".course-entry").addClass("hide-info")},e.findByCode=t=>e($(`.course-entry[data-code="${t}"]`)),e.clearFilter=e=>{$(".course-entry").removeClass(`filter-hide-${e}`)},e.filter=(t,n)=>{$(".course-entry").each((o,s)=>{t(s=e($(s)))?s.removeFilter(n):s.addFilter(n)})},e.filterIfAnyEmptySection=()=>{e.filter(e=>!e.hasEmptySection(),"empty-section")},e.startDisplayMode=t=>{e(t).open().getElement().addClass("display-alone"),$("#menu").addClass("display-mode"),$("body").removeClass("hide-menu")},e.endDisplayMode=()=>{e($(".display-alone")).close().getElement().removeClass("display-alone"),$("#menu").removeClass("display-mode")},e.isOnDisplayMode=()=>$("#menu").hasClass("display-mode"),e.make=(t,n)=>e(templateGenerator.makeCourseEntry(t,n)),e.populate=(e,t,n)=>{let o=$("#course-list").removeClass("loading");e.forEach(e=>{o.append(templateGenerator.makeCourseEntry(e,t,n))})},e})(),sectionEntry=(()=>{let e=function(t){return t instanceof $?new e.prototype.Init(t):e.findByCrn(t)};return e.prototype.Init=function(e){return this.getElement=function(){return e},this},e.prototype.Init.prototype=e.prototype,e.prototype.getCrn=function(){return this.getElement().data("crn")},e.prototype.getName=function(){return this.getElement().data("section-name")},e.prototype.getInstructorName=function(){return this.getElement().find(".instructor").text()},e.prototype.instructorNameContains=function(e){return this.getInstructorName().toUpperCase().indexOf(e)>-1},e.prototype.getGeneralName=function(){return this.getName().split(" ",2).shift()},e.prototype.isSelected=function(){return this.getElement().hasClass("selected")},e.prototype.deselectAlternatives=function(){return this.getElement().siblings(".selected").each((t,n)=>e($(n)).deselect()),this},e.prototype.addFilter=function(e){return this.getElement().addClass(`filter-hide-${e}`),this},e.prototype.removeFilter=function(e){return this.getElement().removeClass(`filter-hide-${e}`),this},e.prototype.getCourseEntry=function(){return courseEntry(this.getElement().parents(".course-entry"))},e.prototype.getScheduleData=function(){return this.getElement().find(".section-day").map((e,t)=>({day:$(t).data("day"),start:$(t).data("start"),duration:$(t).data("duration")})).toArray()},e.prototype.getClassCells=function(){return classCells($($.map(this.getScheduleData(),e=>$("#schedule tr").slice(e.start+1,e.start+e.duration+1).find(`td:eq(${e.day+1})`).toArray())))},e.prototype.select=function(){return this.getElement().addClass("selected"),this.deselectAlternatives(),this.getCourseEntry().actOnSectionSelected(),this},e.prototype.deselect=function(e=!0){return this.getElement().removeClass("selected"),e&&this.getCourseEntry().actOnSectionDeselected(),this},e.prototype.toggleSelect=function(){return this.isSelected()?this.deselect():this.select(),this},e.findByCrn=t=>e($(`.course-section[data-crn="${t}"]:first`)),e.clearFilter=(e,t=!0)=>{$(".course-section").removeClass(`filter-hide-${e}`),t&&courseEntry.filterIfAnyEmptySection()},e.filter=(t,n,o=!0)=>{$(".course-section").each((o,s)=>{t(s=e($(s)))?s.removeFilter(n):s.addFilter(n)}),o&&courseEntry.filterIfAnyEmptySection()},e.filterByDays=()=>{let t=[];$("#day-filter-selections input").each((e,n)=>{$(n).is(":checked")&&t.push(e)}),t.push(5),e.filter(e=>{for(let n of e.getElement().find(".section-day"))if(-1===t.indexOf(Number($(n).data("day"))))return!1;return!0},"day")},e})(),cellCourses=(()=>{let e=function(t){return t instanceof $?new e.prototype.Init(t):e.findByCrn(t)};return e.prototype.Init=function(e){return this.getElements=function(){return e},this},e.prototype.Init.prototype=e.prototype,e.prototype.getSectionName=function(){return this.getElements().first().data("section-name")},e.prototype.getCourseCodeWithSpace=function(){return this.getSectionName().replace(/([A-Z]+)(\d+).*/,"$1 $2")},e.prototype.getCourseCodeWithoutSpace=function(){return this.getSectionName().replace(/([A-Z]+)(\d+).*/,"$1$2")},e.prototype.getParentClassCells=function(){return classCells(this.getElements().parent())},e.prototype.isOfMainCourse=function(){return/^[A-Z]+\d+ .*$/.test(this.getSectionName())},e.prototype.animateCloseButtons=function(t=!0){return t&&this.isOfMainCourse()&&e.findByCourseCode(this.getCourseCodeWithoutSpace()).animateCloseButtons(!1),this.getElements().addClass("animate"),this},e.prototype.getColor=function(){return this.getElements().first().css("background-color")},e.getAllCrnDataToCopy=()=>{let e={},t=[];return $(".cell-course").each((n,o)=>{let s=$(o).data("crn");e.hasOwnProperty(s)||t.push(`${$(o).data("section-name")}: ${s}`),e[$(o).data("crn")]=1}),t.sort().join("\n")},e.getAllCrnDataToSave=()=>{let e={};return $(".cell-course").each((t,n)=>{e[$(n).data("crn")]=1}),Object.keys(e)},e.findByCrn=t=>e($(`.cell-course[data-crn="${t}"]`)),e.findByGeneralSectionName=t=>e($(`.cell-course[data-section-name^="${t}"]`)),e.findByCourseCode=t=>e($(`.cell-course[data-section-name^="${t}"]`)),e.make=(t,n,o)=>e($(templateGenerator.makeCellCourse(t,n,o))),e})(),classCells=(()=>{let e=function(t){return t instanceof $?new e.prototype.Init(t):e.findContainsCrn(t)};return e.prototype.Init=function(e){return this.getElements=function(){return e},this},e.prototype.Init.prototype=e.prototype,e.prototype.getElementsByChildrenCount=function(e){return $($.map(this.getElements(),t=>{if($(t).children().length===e)return t}))},e.prototype.addCellCourse=function(e){return this.getElements().addClass("filled").append(e.getElements().first().clone()),this.getElementsByChildrenCount(1).addClass("make-available"),this},e.prototype.removeCellCourse=function(e){return cellCourses.findByCrn(e).getElements().remove(),this.getElementsByChildrenCount(0).removeClass("filled"),this},e.clearInterests=()=>{$(".interested").removeClass("interested").removeClass("make-available")},e.findContainsCrn=t=>e($(".class-cell").has(`[data-crn="${t}"]`)),e})();(showFirstVisitNotifications=()=>{null===localStorage.getItem("visited-before")&&(localStorage.setItem("visited-before","yes"),$("#notify-about").show(),$("#notify-cookies").show())})(),(updateCourseData=()=>{let e=`course-data-${config.term}-${config.dataVersion}`,t=localStorage.getItem(e),n=()=>{$("#notify-data-updated").fadeIn(500)},o=()=>{let e=!1;for(let t=0;;t++){let o=localStorage.key(t);if(null===o)break;(o.indexOf("course-data")>-1||o.indexOf("saved-schedule")>-1)&&(localStorage.removeItem(o),e=!0)}e&&n()};if(null!==t){let{courses:s,instructors:r,places:i}=JSON.parse(t);courseEntry.populate(s,r,i);return}$.getJSON(`data-v${config.dataVersion}.min.json`,t=>{let{courses:n,instructors:s,places:r}=t;o(),courseEntry.populate(n,s,r),localStorage.setItem(e,JSON.stringify(t))})})();const normalizeSearchParam=e=>e=(e=e.trim().toUpperCase()).replaceAll(/\s+/g,"");(setEvents=()=>{$(document).on("click",".course-header",e=>{courseEntry($(e.currentTarget).parent()).toggleOpen(),courseEntry.isOnDisplayMode()&&courseEntry.endDisplayMode()}),$(document).on("click",".section-link",e=>{e.stopPropagation()}),$(document).on("click",".course-section",e=>{sectionEntry($(e.currentTarget)).toggleSelect()}),$(document).on("click",".remove-course",e=>{sectionEntry($(e.currentTarget).parent().data("crn")).toggleSelect(),e.stopPropagation()}),$(document).on("mouseenter",".remove-course,.course-section.selected",e=>{cellCourses($(e.currentTarget).closest("[data-crn]").data("crn")).animateCloseButtons()}),$(document).on("mouseleave",".remove-course,.course-section.selected",e=>{$(".cell-course.animate").removeClass("animate"),e.stopPropagation()}),$(document).on("click",".cell-course",e=>{courseEntry.startDisplayMode(cellCourses($(e.currentTarget)).getCourseCodeWithSpace())}),$(document).on("mouseenter",".course-section",e=>{let t=sectionEntry($(e.currentTarget));t.getClassCells().getElements().addClass("interested"),cellCourses.findByGeneralSectionName(t.getGeneralName()).getParentClassCells().getElements().filter(".interested").addClass("make-available")}),$(document).on("mouseleave",".course-section",()=>{classCells.clearInterests()});let e=e=>{courseEntry.closeAll();let t="search",n=normalizeSearchParam($("#search-box").val()||"")||"";switch($("#search-category").val()){case"name":courseEntry.filter(e=>e.nameContains(n),t),sectionEntry.clearFilter(t);break;case"instructor":courseEntry.clearFilter(t),sectionEntry.filter(e=>e.instructorNameContains(n),t)}};$("#search-category").on("change",e),$("#search-box").on("input",e),$("#menu-toggle").on("click",()=>$("body").toggleClass("hide-menu")),$(document).on("keyup",e=>{27===e.keyCode&&(courseEntry.isOnDisplayMode()?courseEntry.endDisplayMode():$("#search-box").val("").trigger("input"))}),$(document).on("click","#clear-button",()=>$("#notify-clear").fadeIn(500)),$(document).on("click","#about-button",()=>$("#notify-about").fadeIn(500)),$(document).on("click","#about-button",()=>$("#notify-cookies").fadeIn(500))})(),(setWeekdayFilterEvents=()=>{$(document).on("input","#day-filter-selections input",e=>{sectionEntry.filterByDays()}),$("#day-filter-selections input:not(:checked)").length>0&&(sectionEntry.filterByDays(),$("#day-filter-selections").show())})(),(loadScheduleFromLocalStorage=()=>{let e=localStorage.getItem("saved-schedule");null!==e&&e.split(",").forEach(e=>{$(`.course-section[data-crn="${e}"]`).click()})})(),(setNotificationEvents=()=>{$(document).on("click",".notification .button",e=>{$(e.target).closest(".notification").fadeOut(500)}),$(document).on("click","#notify-clear .notification-button",()=>{$(".course-section.selected").removeClass("selected"),$(".class-cell").attr("class","class-cell").children().remove(),colorPalette.reset(),saveSchedule()})})(),(initializeClipboardJS=()=>{let e=new ClipboardJS("#copy-button",{text:()=>cellCourses.getAllCrnDataToCopy()});e.on("success",()=>{let e=$("#notify-copied");e.fadeIn(500),setTimeout(()=>{e.fadeOut(500)},2e3)}),e.on("error",e=>{let t=$("#notify-copy-fail");t.find(".notification-content p").text(e.text),t.fadeIn(500)})})();